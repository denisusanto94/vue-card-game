/* Card Deck - responsive layout */

.carddeck-app {
	--card-w: 120px;
	--card-h: calc(var(--card-w) * 1.4);
	min-height: 100vh;
	min-height: 100svh;
	max-height: 100vh;
	max-height: 100svh;
	width: 100%;
	margin: 0;
	padding: 0;
	background-color: #0b1020;
}

.carddeck-app .controls {
	margin-bottom: 0;
	display: flex;
	justify-content: center;
	align-items: center;
	gap: 8px;
}

.carddeck-app .deck { max-width: none; width: 100%; margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; }
.carddeck-app { background-color: #0b1020; }

.carddeck-app .stacks { display: flex; flex-direction: column; gap: 22px; justify-content: center; align-items: center; margin: 0; padding: 14px 16px; background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.12); border-radius: 16px; backdrop-filter: blur(4px); }
.carddeck-app .badge-level { display: flex; gap: 12px; align-items: center; justify-content: center; margin: 0; padding-top: 8px; }
.carddeck-app .badge-level .badge-item { width: 36px; height: 36px; display: grid; place-items: center; border-radius: 999px; background: rgba(241,245,249,0.85); box-shadow: inset 0 0 0 1px #e2e8f0; transition: transform .18s ease, background .18s ease, box-shadow .18s ease, filter .18s ease; backdrop-filter: blur(2px); }
.carddeck-app .badge-level .badge-item img { width: 22px; height: 22px; }
.carddeck-app .badge-level .badge-item.active { background: #e0f2fe; box-shadow: inset 0 0 0 2px #38bdf8, 0 4px 10px rgba(56,189,248,.25); transform: translateY(-1px) scale(1.05); }
.carddeck-app .badge-level .badge-item.passed { filter: grayscale(0.9) brightness(0.95); opacity: 0.85; }
.carddeck-app .badge-level .badge-item:not(.active):hover { transform: translateY(-1px); }

.carddeck-app .stack {
	margin: 0;
	width: var(--card-w);
	text-align: center;
	cursor: pointer;
}

.carddeck-app .stack-info { margin-bottom: 8px; color: #e5e7eb; text-shadow: 0 1px 2px rgba(0,0,0,.35); font-weight: 600; font-size: 15px; letter-spacing: .2px; }
.carddeck-app .stack .count { margin-left: 4px; }

.carddeck-app .card {
	border: 1px solid rgba(255,255,255,0.25);
	border-radius: 12px;
	padding: 16px;
	background: rgba(255,255,255,0.95);
	backdrop-filter: blur(2px);
	user-select: none;
	box-shadow: 0 6px 16px rgba(0,0,0,0.18);
	text-align: center;
}

.carddeck-app .card.back { background: #f3f5f7; }
.carddeck-app .stack-area { position: relative; height: calc(var(--card-h) + 40px); perspective: 800px; }
.carddeck-app .card3d { width: var(--card-w); height: var(--card-h); position: absolute; left: 50%; transform-style: preserve-3d; transform-origin: center; transition: transform 0.5s ease; border-radius: 14px; overflow: hidden; border: 1px solid rgba(255,255,255,0.28); box-shadow: 0 8px 20px rgba(0,0,0,0.18); background: #fff; }
.carddeck-app .card3d .face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; display: flex; align-items: center; justify-content: center; font-size: 26px; }
.carddeck-app .card3d .face.front { display: grid; grid-template-rows: 1fr auto; place-items: center; padding: 8px; box-sizing: border-box; gap: 6px; }
.carddeck-app .card3d .face.front .front-img { max-width: 100%; max-height: calc(var(--card-h) - 48px); object-fit: contain; border-radius: 8px; }
.carddeck-app .card3d .face.front { background: #fff; }
.carddeck-app .card3d .face.front .front-label { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; font-weight: 700; font-size: 18px; color: #0f172a; letter-spacing: 0.4px; text-shadow: 0 1px 1px rgba(255,255,255,.6); }
.carddeck-app .card3d.opened .face.front .front-label { font-size: 19px; }
.carddeck-app .card3d .face.back { background-image: url('../card/back-card.png'); background-size: contain; background-position: center; background-repeat: no-repeat; color: transparent; font-size: 0; }
.carddeck-app .card3d.opened .face.back { background-image: none; background-color: #fff; }
.carddeck-app .card3d .front { transform: rotateY(180deg); }
.carddeck-app .card3d.opened { transform: translateX(-50%) rotateY(180deg) var(--stackTransform); }
.carddeck-app .card3d:not(.opened) { transform: translateX(-50%) rotateY(0deg) var(--stackTransform); }
.carddeck-app .card3d.opened { z-index: 999; }
.carddeck-app button { padding: 10px 14px; border-radius: 10px; border: 1px solid #bbb; cursor: pointer; background: rgba(255,255,255,0.9); box-shadow: 0 3px 8px rgba(0,0,0,.18); }
.carddeck-app .btn { padding: 10px 14px; border-radius: 8px; background: #0ea5e9; color: #fff; border: none; font-weight: 700; letter-spacing: .3px; box-shadow: 0 2px 6px rgba(0,0,0,.15); }
.carddeck-app .btn:hover { filter: brightness(1.05); }
.carddeck-app .empty { color: #e2e8f0; font-style: italic; text-shadow: 0 1px 2px rgba(0,0,0,.35); }
.carddeck-app .stack-area::before { content: ''; position: absolute; left: 50%; top: 0; width: var(--card-w); height: var(--card-h); transform: translateX(-50%); background: rgba(249,250,251,0.55); border: 1px solid rgba(238,242,246,0.8); border-radius: 14px; pointer-events: none; box-shadow: inset 0 0 0 1px rgba(255,255,255,0.6); }

/* Animation polish */
.carddeck-app .stack .card3d.opened { transition: transform 0.5s ease, box-shadow 0.25s ease; }
.carddeck-app .stack .card3d.opened .front { animation: shine 0.6s ease; }
@keyframes shine {
	0% { filter: brightness(1); }
	40% { filter: brightness(1.25); }
	100% { filter: brightness(1); }
}

/* Responsive: mobile-first */
@media (max-width: 599px) {
	.carddeck-app { --card-w: 140px; --card-h: calc(var(--card-w) * 1.4); }
	.carddeck-app .deck { padding-top: 8px; }
	.carddeck-app .stacks { gap: 12px; padding: 10px 12px; }
	.carddeck-app .stack-area { height: calc(var(--card-h) + 36px); }
	.carddeck-app .stack-info { font-size: 14px; }
	.carddeck-app .badge-level .badge-item { width: 40px; height: 40px; }
	.carddeck-app .badge-level .badge-item img { width: 24px; height: 24px; }
	body { overflow-x: hidden; }
}

/* Tablet */
@media (min-width: 600px) and (max-width: 1023px) {
	.carddeck-app { --card-w: 180px; --card-h: calc(var(--card-w) * 1.4); }
	.carddeck-app .stacks { gap: 20px; }
	.carddeck-app .stack-area { height: calc(var(--card-h) + 42px); }
	.carddeck-app .badge-level .badge-item { width: 42px; height: 42px; }
	.carddeck-app .badge-level .badge-item img { width: 26px; height: 26px; }
}

/* Desktop wide */
@media (min-width: 1024px) {
	.carddeck-app { --card-w: 260px; --card-h: calc(var(--card-w) * 1.4); }
	.carddeck-app .deck { max-width: 1400px; }
	.carddeck-app .stack-area { height: calc(var(--card-h) + 48px); }
	.carddeck-app .stacks { gap: 24px; }
	.carddeck-app .badge-level .badge-item { width: 44px; height: 44px; }
	.carddeck-app .badge-level .badge-item img { width: 28px; height: 28px; }
}

/* Level Up Overlay */
.carddeck-app .levelup-overlay { position: fixed; inset: 0; display: grid; place-items: center; background: rgba(0,0,0,0.35); z-index: 2000; animation: fadeIn 250ms ease-out; }
.carddeck-app .levelup-content { display: grid; place-items: center; gap: 10px; background: #ffffff; border-radius: 16px; padding: 18px 22px; box-shadow: 0 10px 30px rgba(0,0,0,0.25); transform: scale(0.9); animation: popIn 380ms cubic-bezier(.2,1.1,.3,1); }
.carddeck-app .levelup-badge { width: 72px; height: 72px; }
.carddeck-app .levelup-text { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; font-size: 22px; font-weight: 800; color: #0f172a; letter-spacing: 0.6px; }

/* User bar */
.carddeck-app .user-bar { position: fixed; right: 10px; top: 10px; display: flex; gap: 8px; align-items: center; z-index: 2100; }
.carddeck-app .user-bar .name { color: #e2e8f0; font-weight: 700; text-shadow: 0 1px 2px rgba(0,0,0,.35); }

/* Auth Page */
.carddeck-app .auth-page { position: fixed; inset: 0; display: grid; place-items: center; z-index: 2050; }
.carddeck-app .auth-card { width: min(92vw, 380px); background: rgba(255,255,255,0.96); border-radius: 16px; padding: 18px 20px; box-shadow: 0 10px 30px rgba(0,0,0,.3); display: grid; gap: 10px; }
.carddeck-app .auth-title { font-weight: 800; font-size: 22px; letter-spacing: .4px; color: #0f172a; text-align: center; }
.carddeck-app .auth-form { display: grid; gap: 10px; }
.carddeck-app .auth-input { padding: 10px 12px; border-radius: 10px; border: 1px solid #cbd5e1; }
.carddeck-app .btn.alt { background: #64748b; }
.carddeck-app .btn.muted { background: #94a3b8; }

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes popIn { 0% { opacity: 0; transform: scale(0.85) translateY(8px); } 60% { opacity: 1; transform: scale(1.04) translateY(0); } 100% { transform: scale(1); }
}


